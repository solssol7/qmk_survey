<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>장보기 MBTI 테스트</title>

  <link rel="stylesheet" href="./assets/css/base.css" />
  <link rel="stylesheet" href="./assets/css/layout.css" />
  <link rel="stylesheet" href="./assets/css/components.css" />
</head>

<body>
  <div class="app">
    <main class="stage">
      <section class="card" aria-live="polite">

        <div id="viewIntro" class="view is-active">
          <div class="topline"></div>

          <header class="brandRow">
            <button class="iconBtn" type="button" aria-label="뒤로" disabled>←</button>
            <div class="brandRow__title">
              <div class="brandRow__kicker">나의 장보기 성향은?</div>
              <div class="brandRow__brand">장보기 MBTI 테스트</div>
            </div>
            <div class="brandRow__right">
              <span class="progressTiny">1 / 9</span>
            </div>
          </header>

          <div class="illusBox illusBox--wide" style="background-color: #ffffff;" aria-hidden="true">
            <img id="introImage" alt="" onerror="this.style.display='none';" />
            <div class="illusFallback" style="display:none;">
              <div class="illusFallback__title">INTRO IMAGE</div>
              <div class="illusFallback__desc">assets/img/intro/intro.png</div>
            </div>
          </div>

          <div class="introCopy">
            <h1 class="introTitle">1분만에 끝나는 장보기 성향 테스트</h1>
            <p class="introDesc">
              이미 매칭된 마트 기준으로<br />
              “무엇을 먼저 추천받아야 할지”를 찾아드려요.
            </p>
            <p id="uidNote" class="uidNote"></p>
          </div>

          <div class="actions actions--stack">
            <button id="btnStart" class="btn btn--pillPrimary" type="button">테스트 시작!</button>
            <button id="btnDemo" class="btn btn--pillGhost" type="button">(데모) 바로 결과 보기</button>
          </div>

          <p class="footNote">
            * 본 테스트는 재미/추천 최적화를 위한 성향 분류이며, 실제 상품 구성은 매장별로 달라질 수 있어요.
          </p>
        </div>

        <div id="viewQuiz" class="view">
          <div class="topline"></div>

          <header class="brandRow">
            <button id="btnPrev" class="iconBtn" type="button" aria-label="이전">←</button>
            <div class="brandRow__title">
              <div class="brandRow__kicker">장보기 MBTI 테스트</div>
              <div class="brandRow__brand" id="quizTitleTop">질문</div>
            </div>
            <div class="brandRow__right">
              <span id="progressLabel" class="progressTiny">1 / 9</span>
            </div>
          </header>

          <div class="progressBar" role="progressbar" aria-valuemin="0" aria-valuemax="9" aria-valuenow="1">
            <div id="barFill" class="progressBar__fill"></div>
          </div>

          <div class="illusBox illusBox--wide" style="background-color: #ffffff;">
            <img id="qImage" alt="" onerror="this.style.display='none';" />
            <div id="qImageFallback" class="illusFallback" style="display:none;">
              <div class="illusFallback__title">QUESTION IMAGE</div>
              <div class="illusFallback__desc">assets/img/questions/q01.png</div>
            </div>
          </div>

          <div class="questionBlock">
            <h2 id="qTitle" class="qTitle">질문 제목</h2>
            <p id="qHint" class="qHint">힌트 문구</p>
          </div>

          <div id="choices" class="choicePills" aria-label="선택지"></div>
        </div>

        <div id="viewResult" class="view">
          <div class="topline"></div>

          <header class="brandRow">
            <button id="btnBackFromResult" class="iconBtn" type="button" aria-label="처음으로">←</button>
            <div class="brandRow__title">
              <div class="brandRow__kicker">나의 장보기 성향은?</div>
              <div class="brandRow__brand">테스트 결과</div>
            </div>
            <div class="brandRow__right">
              <span class="progressTiny">완료</span>
            </div>
          </header>

          <div class="resultHead">
            <div class="resultBadgeLine">
              <span id="resultBadge" class="badge">나의 타입</span>
              <span id="resultCodeText" class="codePill">PVE</span>
            </div>

            <h2 id="resultTitle" class="resultTitle">타입명</h2>
            <p id="resultOne" class="resultOne">한 줄 소개</p>

            <p id="resultRateText" class="resultRate">
              전체 테스트 참여자 중 <b>00.00%</b>가 같은 유형입니다.
            </p>
          </div>

          <div class="illusBox illusBox--portrait" style="background-color: #ffffff;">
            <img id="resultImage" alt="" onerror="this.style.display='none';" />
            <div id="resultImageFallback" class="illusFallback" style="display:none;">
              <div class="illusFallback__title">RESULT IMAGE</div>
              <div class="illusFallback__desc">assets/img/results/PVE.png</div>
            </div>
          </div>

          <div class="card__body stack">
            <div class="box">
              <h3 class="h3">이런 점이 좋아요</h3>
              <div id="strengthChips" class="chips"></div>
            </div>
            <div class="box">
              <h3 class="h3">이건 좀 주의해요</h3>
              <div id="riskChips" class="chips"></div>
            </div>
            <div class="box">
              <h3 class="h3">추천 코너</h3>
              <div id="sectionChips" class="chips"></div>
            </div>
            <div class="box">
              <h3 class="h3">예상 장바구니</h3>
              <div id="basketChips" class="chips"></div>
            </div>
            <div class="box">
              <h3 class="h3">성향 분석표</h3>
              <div id="weightGrid" class="weights"></div>
            </div>
          </div>
          <div class="resultActions">
            <div class="saveHint">꼭 눌러 이미지 저장하기</div>
            <div class="actions actions--stack">
              <button id="btnCopy" class="btn btn--pillPrimary" type="button">링크 복사</button>
              <button id="btnSave" class="btn btn--pillGhost" type="button">내 타입 저장</button>
              <button id="btnRestart" class="btn btn--pillLight" type="button">다시 테스트</button>
            </div>
            <p class="shareUrlLine">
              <span class="shareLabel">공유 링크</span>
              <span id="shareUrl" class="shareUrl"></span>
            </p>
          </div>
        </div>

      </section>
    </main>
  </div>

  <script src="./assets/js/config.js"></script>
  <script src="./assets/js/utils.js"></script>
  <script src="./assets/js/supabase.js"></script>
  <script src="./assets/js/data.js"></script>
  <script src="./assets/js/quiz.js"></script>
  <script src="./assets/js/main.js"></script>
</body>
</html>
